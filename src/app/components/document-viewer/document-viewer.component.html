<ng-container *ngIf="{
      tab : ui.tabViewer$ | async,
      docs:loanCurrentDocs$ | async,
      docGuid: docGuid$ | async,
      status : loanCurrentDocsStatus$ | async } as compData">

  <api-state [state]="compData?.status" [toaster]="true" [showSuccess]="false" *ngIf="compData?.status">
    
    <ng-container *ngIf="compData.docs && compData.docGuid">
      
      <div class="card pdf" id="app-viewer">

        <div class="card-header">
          <div class="float-right">
            <small class="mr-2">
              <em>JKrause</em> |
              <em>02/24/2018</em> |
              <i class="fa fa-arrow-right" title="Side" *ngIf="compData.docs?.dict[compData.docGuid]?.rightSide"></i>
              <i class="fa fa-arrow-left" title="Side" *ngIf="!compData.docs?.dict[compData.docGuid]?.rightSide"></i> |

              <ng-container *ngIf="compData.docs?.dict[compData.docGuid]?.forReview">
                <i class="fa fa-square for-review {{compData.docs?.dict[compData.docGuid]?.forReview}}" aria-hidden="true" title="For Review"></i> |
              </ng-container>

              <i class="fa fa-check-square green" title="Final Stamp" aria-hidden="true" *ngIf="compData.docs?.dict[compData.docGuid]?.finalStamp"></i>
              <i class="fa fa-square" title="Final Stamp" aria-hidden="true" *ngIf="!compData.docs?.dict[compData.docGuid]?.finalStamp"></i>

            </small>

            <div ngbDropdown class="d-inline-block" placement="bottom-right" #myDrop="ngbDropdown"
                 (mouseenter)="$event.stopPropagation(); myDrop.open();"
                 (mouseleave)="$event.stopPropagation(); myDrop.close();">
              <button class="btn btn-secondary btn-sm" id="dropdownBasic1" ngbDropdownToggle>
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i> Documents ({{compData.docs.src.length}})
              </button>
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <button class="dropdown-item" [ngClass]="doc.docGuid == compData.docGuid ? 'active' : null"
                        (click)="ui.docViewerChange(doc.docGuid)"
                        *ngFor="let doc of compData.docs.src">
                  {{doc.docName}}
                </button>
              </div>
            </div>

            |

            <button class="btn btn-sm btn-secondary" (click)="ui.multiScreenToggle()">
              <i class="fa fa-window-restore" aria-hidden="true"></i>
            </button>

          </div>
          <i class="fa fa-file-pdf-o" aria-hidden="true"></i> {{compData.docs?.dict[compData.docGuid]?.docName}}
        </div>

        <object [data]="compData.docs?.dict[compData.docGuid]?.docUrl | safe: 'resourceUrl'"
                type="application/pdf"
                class="w-100 pdf" style="top: 52px;">
          <embed [src]="compData.docs?.dict[compData.docGuid]?.docUrl | safe: 'resourceUrl'" type="application/pdf" />
        </object>

      </div>

    </ng-container>
  </api-state>
</ng-container>
